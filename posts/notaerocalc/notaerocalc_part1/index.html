<!doctype html><html lang=en><head><title>NotAeroCalc Part 1: What is NotAeroCalc and how to use it? :: Dhruv Patel</title>
<meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="I am a Computer Engineer by education and by training. Luckily, we computer engineers do not have to deal with different units. All our units are power of 2. We have sensible names, Kilo, Mega, Giga, you get it. When we get unlucky, there could be a confusion of whether Kilo in the context is $ 2^{10} $ or $ 10^3 $. But that is it.
But in other engineering (and science) branches this is not the case. A while ago I was taking a course &ldquo;Introduction Aeronautical Engineering&rdquo; on edX (the course is from TUDelft). Honestly, the homework problems there were annoying, at least for me. I can understand that students in the Aero department might need to practice the conversion process.
"><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://dhruvpatel.dev/posts/notaerocalc/notaerocalc_part1/><link rel=stylesheet href=https://dhruvpatel.dev/css/buttons.min.86f6b4c106b6c6eb690ae5203d36b442c1f66f718ff4e8164fa86cf6c61ad641.css><link rel=stylesheet href=https://dhruvpatel.dev/css/code.min.4f0ccc8439f99bf7f7970298556b94011aabc1fcae743b6842fc3361a2da9ea3.css><link rel=stylesheet href=https://dhruvpatel.dev/css/fonts.min.5bb7ed13e1d00d8ff39ea84af26737007eb5051b157b86fc24487c94f3dc8bbe.css><link rel=stylesheet href=https://dhruvpatel.dev/css/footer.min.eb8dfc2c6a7eafa36cd3ba92d63e69e849e2200e0002a228d137f236b09ecd75.css><link rel=stylesheet href=https://dhruvpatel.dev/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css><link rel=stylesheet href=https://dhruvpatel.dev/css/header.min.75c7eb0e2872d95ff48109c6647d0223a38db52e2561dd87966eb5fc7c6bdac6.css><link rel=stylesheet href=https://dhruvpatel.dev/css/main.min.15870410d15d02abd22fb5ef00996f65a00d04b3a7435e9f83831c7c2298de88.css><link rel=stylesheet href=https://dhruvpatel.dev/css/menu.min.3c17467ebeb3d38663dce68f71f519901124fa5cbb4519b2fb0667a21e9aca39.css><link rel=stylesheet href=https://dhruvpatel.dev/css/pagination.min.bbb986dbce00a5ce5aca0504b7925fc1c581992a4bf57f163e5d69cc1db7d836.css><link rel=stylesheet href=https://dhruvpatel.dev/css/post.min.e6dddd258e64c83e05cec0cd49c05216742d42fc8ecbfbe6b67083412b609bd3.css><link rel=stylesheet href=https://dhruvpatel.dev/css/syntax.min.a0773cce9310cb6d8ed23e50f005448facf29a53001b57e038828daa466b25c0.css><link rel=stylesheet href=https://dhruvpatel.dev/css/terminal.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css><link rel=stylesheet href=https://dhruvpatel.dev/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css><link rel="shortcut icon" href=https://dhruvpatel.dev/favicon.png><link rel=apple-touch-icon href=https://dhruvpatel.dev/apple-touch-icon.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="NotAeroCalc Part 1: What is NotAeroCalc and how to use it?"><meta property="og:description" content="I am a Computer Engineer by education and by training. Luckily, we computer engineers do not have to deal with different units. All our units are power of 2. We have sensible names, Kilo, Mega, Giga, you get it. When we get unlucky, there could be a confusion of whether Kilo in the context is $ 2^{10} $ or $ 10^3 $. But that is it.
But in other engineering (and science) branches this is not the case. A while ago I was taking a course &ldquo;Introduction Aeronautical Engineering&rdquo; on edX (the course is from TUDelft). Honestly, the homework problems there were annoying, at least for me. I can understand that students in the Aero department might need to practice the conversion process.
"><meta property="og:url" content="https://dhruvpatel.dev/posts/notaerocalc/notaerocalc_part1/"><meta property="og:site_name" content="Dhruv Patel"><meta property="og:image" content="https://dhruvpatel.dev/og-image.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><meta property="article:published_time" content="2021-04-03 18:04:02 +0530 +0530"><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css integrity=sha384-Xi8rHCmBmhbuyyhbI88391ZKP2dmfnOl4rT9ZfRI7mLTdk1wblIUnrIq35nqwEvC crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js integrity=sha384-X/XCfMm41VSsqRNQgDerQczD69XqmjOOOwYQvr/uuC+j4OPoNhVgjdGFwhvN02Ja crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous onload=renderMathInElement(document.body)></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script></head><body><div class="container center"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>Dhruv Patel</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;â–¾</li><li><ul class=menu__dropdown><li><a href=/about/>About</a></li><li><a href=https://github.com/DhruvPatel01/>Github</a></li><li><a href=/notes>Notes</a></li><li><a href=/now>Now</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/about/>About</a></li><li><a href=https://github.com/DhruvPatel01/>Github</a></li><li><a href=/notes>Notes</a></li><li><a href=/now>Now</a></li></ul></nav></header><div class=content><article class=post><h1 class=post-title><a href=https://dhruvpatel.dev/posts/notaerocalc/notaerocalc_part1/>NotAeroCalc Part 1: What is NotAeroCalc and how to use it?</a></h1><div class=post-meta><time class=post-date>2021-04-03</time></div><span class=post-tags>#<a href=https://dhruvpatel.dev/tags/science/>science</a>&nbsp;
#<a href=https://dhruvpatel.dev/tags/aero/>aero</a>&nbsp;
#<a href=https://dhruvpatel.dev/tags/physics/>physics</a>&nbsp;
#<a href=https://dhruvpatel.dev/tags/python/>python</a>&nbsp;
#<a href=https://dhruvpatel.dev/tags/ply/>ply</a>&nbsp;
#<a href=https://dhruvpatel.dev/tags/yacc/>yacc</a>&nbsp;
#<a href=https://dhruvpatel.dev/tags/lex/>lex</a>&nbsp;</span><div class=post-content><div><p>I am a Computer Engineer by education and by training. Luckily, we computer engineers do not have to deal with different units. All our units are power of 2. We have sensible names, Kilo, Mega, Giga, you get it. When we get unlucky, there could be a confusion of whether Kilo in the context is $ 2^{10} $ or $ 10^3 $. But that is it.</p><p>But in other engineering (and science) branches this is not the case. A while ago I was taking a course &ldquo;Introduction Aeronautical Engineering&rdquo; on edX (the course is from TUDelft). Honestly, the homework problems there were annoying, at least for me. I can understand that students in the Aero department might need to practice the conversion process.</p><p>There is a <code>Newton</code>, which is also $\frac{kg * m}{s^2}$. There is an imperial unit for length called <code>foot</code>, but you <strong>have to</strong> convert that into SI units to be compatible with other units in the formula, because the constants in the formula use <code>m</code>. Then there is <code>Celsius</code> to <code>Kelvin</code> mapping. You either have to memorize the conversion factors, or you have to make a long list of the conversion factors.</p><p>Something had to be done. And I was also looking for something to do on the weekends. So I am working on <a href=https://github.com/DhruvPatel01/NotAeroCalc/>NotAeroCalc</a>. I kept Aero in because my primary aim is to expedite solving homework problems in that course. But many parts of the app are general and should be usable outside Aerospace engineering.</p><p>Rather than explaining what NotAeroCalc does, let me show you it in action.</p><script id=asciicast-sYPyE91MGr9QOamVwnYThzlZN src=https://asciinema.org/a/sYPyE91MGr9QOamVwnYThzlZN.js async></script><p>You might have noticed a few things. First there is a need for <code>*</code> between quantity and its unit. I designed it this way because it simplifies the grammar. Another thing is that units are not pluralized, e.g. it is <code>32000 foot</code> and not <code>32000 feet</code>. If you need your answer in SI units just use <code>expression in si</code>.</p><p>In the backend I am using an amazing Python library called <a href=https://www.astropy.org/>Astropy</a> for conversion and <a href=https://github.com/dabeaz/ply>Ply</a> for parsing. You can use all the units available in Astropy, the list can be found <a href=https://docs.astropy.org/en/stable/units/>here</a>.</p><p>You can also use math constants like <code>pi</code> and <code>e</code>. Internally NotAeroCalc looks for unresolved names in <code>math</code> library in Python. So if you haven&rsquo;t created a <code>pi</code> variable, <code>math.pi</code> will be used.</p><h2 id=commands-in-notaerocalc>Commands in NotAeroCalc<a href=#commands-in-notaerocalc class=hanchor arialabel=Anchor>#</a></h2><dl><dt><code>del x</code></dt><dd>deletes the variable named <code>x</code> if defined. If not defined ignores the command.</dd><dt><code>variables</code></dt><dd>lists all the variables defined in the current session.</dd></dl><h2 id=problem-solving-with-notaerocalc>Problem Solving with NotAeroCalc<a href=#problem-solving-with-notaerocalc class=hanchor arialabel=Anchor>#</a></h2><p>Let&rsquo;s try to solve one problem using NotAeroCalc. Below is one of the homework problems from the course.</p><pre tabindex=0><code>An aircraft flies at an altitude of 30,000 feet. 
Determine the air temperature (in [K]), 
air pressure (in [Pa]) and air density (in [kg/m3]) 
at this altitude, according to the standard atmosphere.
</code></pre><p>Following are the variables given.</p><pre tabindex=0><code>g = 9.80665 * m/s/s
T0 = 15*Celsius in Kelvin
P0 = 1013.25 * hectopascal
h = 30000 * foot in m
a = -6.5 * Kelvin/km
rho0 = 1.225 * kg/m^3
</code></pre><p>Notice that some variables are given in <code>m</code> whereas others are in <code>km</code>. A good thing about using NotAeroCalc is that generally you do not need to worry about this discrepancy. However you can always use <code>expr in si</code> to have unified values.</p><p>Since 30,000 foot is in troposphere, we can use $ T_1 = T_0 + a*h $ formula to compute the temperature at 32000 foot.</p><p>Once we know the temperature, we can use the following formula to compute the air density.</p><p>$$
\frac{\rho_0}{\rho_1} = {\left( \frac{T_1}{T_0} \right)} ^{\frac{g}{R * a} - 1}
$$</p><p>There are few things about <code>^</code> operator in NotAeroCalc that you should keep in mind.</p><ul><li>In <code>a^b</code>, <code>b</code> has to be unit less. So expression like <code>2^(3*m/(3*m))</code> is allowed, but <code>2^(3*m/3*m)</code> is not, as it simplifies to <code>2^(1*m^2)</code>.</li><li>By default the units are not simplified, you might have to use <code>a^(b in si)</code> if units in b cancel out.</li><li><code>2^((3*m)/(300*cm))</code> will give you an error. Use <code>2^((3*m)/(300*cm) in si)</code> for now. I might fix this later.</li><li>If <code>a</code> has units, <code>b</code> has to be like an integer. <code>b = 3.0</code> is allowed, but <code>b = 3.14</code> is not. So <code>(3*m)^2.0</code> evaluates to <code>9*m^2</code>.</li><li>Finally, if <code>a</code> does not have units, any power is allowed.</li></ul><p>In the above density formula, the exponent is actually unit less. So everything works out.</p><p>See the following recording for the whole solution.</p><script id=asciicast-oTGxU3t8WOPyI6orh3W0TBMfh src=https://asciinema.org/a/oTGxU3t8WOPyI6orh3W0TBMfh.js async></script><h2 id=what-is-next>What is next?<a href=#what-is-next class=hanchor arialabel=Anchor>#</a></h2><p>As far as blogging goes, I plan to write the details of how NotAeroCalc was implemented, the nitty gritty details of Lex and Yacc, in the next part. It is not that difficult really.</p><p>In the NotAeroCalc itself, I plan to add some features like having a database of formulas, and solving for a particular variables using other user defined variables.</p><p>GitHub repository for this project can be found <a href=https://github.com/DhruvPatel01/NotAeroCalc/>here</a>.</p></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h></span><hr></div><div class=pagination__buttons><a href=https://dhruvpatel.dev/posts/python_circular_imports/ class="button inline prev">&lt; [<span class=button__text>Python got me with circular imports!</span>]
</a>::
<a href=https://dhruvpatel.dev/posts/flajolet-martin/ class="button inline next">[<span class=button__text>How to find the number of unique elements in a stream?</span>] ></a></div></div></article></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>Dhruv Patel</span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script></div></body></html>